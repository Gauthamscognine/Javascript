generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
  schemas  = ["public", "training"]
}

model departments {
  deptid      Int     @id @default(autoincrement())
  name        String  @db.VarChar(100)
  description String? @db.VarChar(255)
  staff         staff[]

  @@schema("public")
}

model attendance {
  attendanceid   Int      @id @default(autoincrement())
  empid          Int
  attendancedate DateTime @db.Date
  status         String   @db.VarChar(20)
  staff          staff     @relation(fields: [empid], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_attendance_employee")

  @@schema("public")
}

model roles {
  roleid   Int    @id @default(autoincrement())
  rolename String @db.VarChar(100)
  staff      staff[]

  @@schema("public")
}

model staff {
  id          Int          @id(map: "staff_pkey") @default(autoincrement())
  name        String?      @db.VarChar(100)
  sal         Int?
  email       String?      @unique @db.VarChar(150)
  password    String?
  refrestToken String?
  deptid      Int?
  roleid      Int?
  providerId String?     @unique
  authProvider String?    @default("LOCAL")
  attendance  attendance[]
  roles       roles?       @relation(fields: [roleid], references: [roleid], onDelete: NoAction, onUpdate: NoAction, map: "fk_employees_role")
  departments departments? @relation(fields: [deptid], references: [deptid], map: "staff_deptid_fkey")
  @@map("emp")
  @@schema("public")
}
